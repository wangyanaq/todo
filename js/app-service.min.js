(function(a){a.module("todoApp",[]).service("todoService",function(e){var d=this;var b=e.localStorage;var c=JSON.parse(b.getItem("todo"))||[];this.save=function(){b.setItem("todo",JSON.stringify(c))};this.getData=function(){return c};this.add=function(f){var g;g=c.length===0?1:c[c.length-1].id+1;c.push({id:g,name:f,isCompleted:false});this.save()};this.del=function(g){for(var f=0;f<c.length;f++){if(c[f].id===g){c.splice(f,1);break}}d.save()};this.changeAll=function(f){for(var g=0;g<c.length;g++){c[g].isCompleted=f}this.save()};this.changeOne=function(g){for(var f=0;f<c.length;f++){if(c[f].isCompleted==false){g.checkAll=false;this.save();return}else{g.checkAll=true}}this.save()};this.isShow=function(){for(var f=0;f<c.length;f++){if(c[f].isCompleted==true){d.save();return true;break}}d.save();return false};this.clearComplated=function(){var g=[];for(var f=0;f<c.length;f++){if(!c[f].isCompleted){g.push(c[f])}}c.length=0;[].push.apply(c,g);d.save()};this.unCompletedCount=function(){var g=0;for(var f=0;f<c.length;f++){if(!c[f].isCompleted){g++}}return g}}).controller("TodoController",["$scope","$location","todoService",function(c,f,b){var d=c;var e=b.getData();d.todoList=e;d.todoName="";d.add=function(){if(d.todoName.trim()===""){return}b.add(d.todoName);d.todoName=""};d.del=b.del;d.editId=-1;d.edit=function(h,g){if(!g){d.editId=h}};d.update=function(g){d.editId=-1};d.checkAll=false;d.changeAll=function(){b.changeAll(d.checkAll)};d.changeOne=function(){b.changeOne(d)};d.isShow=b.isShow;d.clearComplated=b.clearComplated;d.unCompletedCount=b.unCompletedCount;d.state=undefined;c.location=f;c.$watch("location.url()",function(h,g){switch(h){case"/":d.state=undefined;break;case"/active":d.state=false;break;case"/completed":d.state=true;break}})}])})(angular);